{% load wagtailimages_tags wagtailembeds_tags wagtailcore_tags static %}

{% if self.visible %}
<div class="split_banner_section {% if self.orientation == 'right' %}right{% endif %}">

  <div class="split_banner_section__banner {% if self.orientation == 'right' %}right{% endif %}">
    <div class="split_banner_section__text {% if self.orientation == 'right' %}right{% endif %}">
      {% if self.headline %}
        <h3 id="{{self.headline|slugify}}" data-magellan-target="{{self|slugify}}">
          {{self.headline}}
        </h3>
      {% endif %}

      {% if self.paragraph %}
        <div>
          {{self.paragraph}}
        </div>
      {% endif %}

      {% if self.paragraph %}
        <button class="split_banner_section__button">
          {{self.CTA.text}}
        </button>
      {% endif %}
    </div>
  </div>

  <div class="split_banner_section__image-container {% if self.orientation == 'right' %}right{% endif %}">
  {% if self.image_or_video %}

    <div class="orbit" role="region" aria-label="TIER slide photos" data-orbit>
      <div class="orbit-wrapper">
        <div class="orbit-controls">
          <button class="orbit-previous"><span class="show-for-sr">Previous Slide</span>&#9664;&#xFE0E;</button>
          <button class="orbit-next"><span class="show-for-sr">Next Slide</span>&#9654;&#xFE0E;</button>
        </div>
        <ul class="orbit-container">

          {% for item in self.image_or_video %}
            <li class="orbit-slide {% if item == self.image_or_video.first %}is-active{% endif %}">
              <figure class="orbit-figure">
                {% image item.value fill-600x350 as slide_photo %}
                <img class="orbit-image" src="{{ slide_photo.url }}" alt="{{ slide_photo.alt }}">
                <figcaption class="orbit-caption">{{ slide_photo.alt }}</figcaption>
              </figure>
            </li>
          {% endfor %}

        </ul>
      </div>

      <nav class="orbit-bullets">
        {% for item in self.image_or_video %}
          {% if forloop.counter == 0 %}
            <button class="is-active" data-slide="0">
              <span class="show-for-sr">First slide details.</span>
              <span class="show-for-sr" data-slide-active-label>Current Slide</span>
            </button>
          {% else %}
            <button data-slide="{{ forloop.counter0 }}"><span class="show-for-sr">Slide details.</span></button>
          {% endif %}
        {% endfor %}
      </nav>

    </div>

    <!-- {% if self.image_or_video.items.video != '' %}
      {% embed self.image_or_video.items.video %}
    {% elif self.image_or_video.items.image != None %}
      {% image self.image_or_video.items.image fill-600x350 %}
    {% else %}
      <img class="placeholder" src="{% static "img/split-banner-placeholder.jpg" %}"/>
    {% endif %} -->
  {% else %}
    <img class="placeholder" src="{% static "img/split-banner-placeholder.jpg" %}"/>
  {% endif %}

  </div>
</div>
{% endif %}
